# Live data analysis demonstration {-}

## Introduction {-}

I thought it would be good to get hands on as early as possible, and to do so for something directly relevant to yourselves.
So, we're going to attempt something quite ambitious -- in the next two hours or so, we'll go through a whole data analysis from start to end.
Lets get started.

## Meta-task

Write things that you don't understand, and need to know about in subsequent classes. We will cover these things.


## The question

What should be our question?
As always, there are some influences and some constraints.
We should ask a question of interest to us, and of some importance.
And we should be able to collect the data, within our current constraints, necessary to answer the question.

The question we will address is "do male and female reaction times of students at the University of Zurich differ?".

Why this question? Reaction times are important, safety, sport...

## Expectation

We can have a look on the internet, and pretty easily find lots of studies of reaction times and gender (e.g., [A comparative study of visual and auditory reaction times on the basis of gender and physical activity levels of medical first year students](https://www.ncbi.nlm.nih.gov/pmc/articles/PMC4456887/) (by the way, we will later in the course critique this paper -- it has some pretty poor features).

Generally, we see that males tend to have faster reaction times than females. So we expect that to be the same for students at the University of Zurich.

Given that you know this pattern, and you are the subjects, its interesting to see if you women can buck the trend, perhaps by trying especially hard. Though know the men know you might do this, it probably won't work!

## How are we going to present the results?

Thinking backwards from how we present the final results, can often be quite useful.

I think a nice box and whisker plot will work here (Owen will sketch this). We will have two groups of reaction times. Put another way, we will have one explanatory variable (gender) and one response variable (reaction time). The explanatory variable gender is a categorical / discrete variable. The response variable is continuous.

We expect the distribution of male reaction times to be have a lower mean than the distribution of female reaction times.

We will look at this graph, and answer our question (wow, without any statistical test -- YES!).

## What statistical test will we use?

Reaction times (the response variable) we expect to be quite normally distributed, though cannot be negative. Gender will be categorical with two levels (male and female). We don't expect greater or less variation in reaction times among males compared to among females.

Based on these expectations, we will use a linear model, which assumes normally distributed residuals and equal variances among groups. The traditional name for the test is the T-test.

Based on convention, and little else, we will say there is a significant difference between male and female reaction times if the observed difference has a p-value of less than 0.05.

 
## Selection of subjects

We usually need to very carefully select the subjects of our study. Ideally, as we're interested in students at the University of Zurich (see the question), we would select a cross section of such students. Instead, you are going to be the subjects, and you are not representative of all students. You're relatively young, on average, you're studying natural sciences, etc. So we will have to be very cautious if we make statements about students at the University in general, and perhaps one might even now conclude that we can't really answer the question.

Perhaps we need the question "do male and female reaction times of biology and biomedicine students, in their first year, at the University of Zurich differ?"


## Ethical clearance and considerations

If we aimed to publish these results, or in some other way disseminate them, we would need ethical clearance for research involving humans. We're not, so we don't have ethical clearance.

However, please do not include any personal information in any of the data you contribute to the exercise.


## Data collection

Create for yourself a unique ID code, so that if we want to collect more data about you, we could related the reaction time data to that. Write this code down somewhere safe, keep it.

Go to the [Human Benchmark website](http://www.humanbenchmark.com/tests/reactiontime).

Do the reaction time test and write down your reaction time in fractions of a second.

While you're there, also please do the other three tests, and write down your score. We don't need these for our current question about reaction times, but we might look at this data later in the course.

Now go to this web page: https://goo.gl/forms/clIdMtTj1g1npfLk2 and enter your ID, gender, and four scores. Please be careful!

Go ahead and do all that.

## Look at the data!

Here is the link to the datasheet containing all the data you just recorded:
https://docs.google.com/spreadsheets/d/1wltFGU6bbkYeiDzzvQTIsYwOuqpDZL8xiLAxX0QJWWk/edit#gid=1188775314

Lets have a look at it, see what you've done. (I'm scared! I know how difficult it is to enter data without making mistakes! And I have some experience of how different people are!)

## Lets get the data into our data analysis software of choice (R, via RStudio)

First note that Owen has gone to the responses googlesheet, and in the "File" menu, clicked on "Publish to web..." and chosen to publish as "Comma separate values".

Now we can read that web page of comma separated values into R:

```{r}
## First we load a required package (we need to install this if we haven't already)
library(readr)
## also we will use some other packages
library(dplyr)

## Now read in the data, using the read_csv() function. We give it the URL of the published version of the google sheet data.
the_URL <- "https://docs.google.com/spreadsheets/d/e/2PACX-1vQFgYX1QhF9-UXep22XmPow1ZK5nbFHix9nkQIa0DzqUhPtZRxH1HtY-hsno32zDiuIHiLb2Hvphk1L/pub?gid=1188775314&single=true&output=csv"
class_RTs <- read_csv(the_URL)

## Have a look at the data in R
View(class_RTs)
## or just do
class_RTs
```

## Now we need to do some cleaning and tidying

### Clean up the column / variable names:

```{r}
## Must be very careful to get the next line right!!! Really important!!!
names(class_RTs) <- c("Timestamp", "ID", "Gender", "Reaction_time",
                      "Verbal_memory_score", "Number_memory_score",
                      "Visual_memory_score")
class_RTs
```

### Check the variable types are correct.

* Timestamp should be a character
* ID should be a character
* Gender should be a character
* The remaining four variables should be numeric (<dbl> if fractional, <int> if whole numbers).

```{r}
class_RTs
```

### Correct or exclude problematic data

If we have problems here, with variables of the wrong type, it probably means some of the data entry is a bit messed up.

```{r}
## Have to do this live!!!
## e.g. to exclude observations with character entries in Reaction_time variable
class_RTs <- filter(class_RTs, !is.na(as.numeric(Reaction_time)))
```

Once fixed, we need to make the variable have the correct type
```{r}
## try using type_convert() from readr package.
class_RTs <- type_convert(class_RTs)
```


### Check the number of observations

Should be the same as we saw in the datasheet, which should be number of you in this classroom.

The number of observations and variables is given by R in the first line of output when we type the name of the data object:

```{r}
class_RTs
```










### Why is data analysis so important? {-}

The course will begin with a general introduction, including why data analysis is so important in biology and biomedicine, and indeed in many walks of life and careers. We will introduce a few problems that can be addressed by anaylsis of data, including:

* In order to conserve and manage species, and potentially assist them adapt to environmental change, we need to know their habitat requirements. This problem, and the role of data analysis, is illustrated by a study of otter populations in the European Alps.

* In small populations, or populations that have been small (i.e. experienced a bottleneck), closely related individual may mate and have offspring. Such inbreeding can have fitness costs that may endanger population persistence. The consequence of inbreeding among alpine ibex. This problem is illustrated by a quantitative study of Apline ibex populations.

* Mercury can be quite toxic, with potentially nasty effects on people's health. It can also occur in the environmentl Quantitative analyses can help understanding links between amounts of mercury in the environment and inside people's bodies. This problem is illustrated by a study in the Wallis.

* Physical activity (exercise) can be mentally and physically beneficial. Knowing the factors that influence physical activity could be useful for developing policies to encourage and promote it. This problem is illustrated by a study that recorded children's activity patterns, and also recorded information about their lives, such as media consumption and behaviour of parents.

In addition, you're introduced to some problems (and their associated datasets) that we use several times during the course:

* A study of predictors of body fat in humans.

* A study of diet and blood glucose levels.

* A study of use of blood screening to indicate certain diseases.

Nevertheless, many other problems and datasets will be introduced and used during the course.


### Some important terms {-}

We'll explain what we mean by data analysis, statistical analysis, models, and some other important terms.


### A general workflow for data analysis {-}

We'll introduce a general workflow that we'll use for all the data analyses in the course.


### Data wrangling {-}

There will be a brief introduction to data wrangling, and you will be directed to the study you will do before the week 2 practical session.

### Visualisation of data  {-}

Visualising our data in graphs is one of the most important parts of data analysis. We use it to explore our data, to understand our data, to guide our statistical analyses, and to communicate our results. There will be a brief introduction to types of graphs to use (and not to use). You will be directed to the study you will do before the week 2 practical session.

### Live data analysis demonstration {-}

We will attempt to go through the entire workflow during the class! This will be a good opportunity to recap some of the things you should already know.


## Study to do by week 2 {-}

Watch the video lectures "Getting data ready for R", "Getting data into R", and "Basic visualisation in R".

Read chapters X, Y, and Z of ???BOOK???.

Consider attempting the exercises for the week 2 practical session.


## Handouts {-}

[PDF of the lecture by Dr. Muff.](\lectures\week1\en\lecture1_en.pdf)

## Further reading {-}


